<html>
  <head>
    
  </head>

  <body>
    <script type="text/javascript">
      var time_start;

      window.onload = function() {
      time_start = new Date().getTime();
      }

      window.onunload = function() {
      ping(new Date().getTime() - time_start);
      }

      function ping(difference) {
      var xhr = new XMLHttpRequest();

      xhr.onreadystatechange = function() {
        if (xhr.readyState == 1) {
          console.log("The call to open(...) succeeded.");
        }
        if (xhr.readyState == 2) {
          console.log("The call to send(...) succeeded. Waiting for response...");
        }
        if (xhr.readyState == 3) {
          console.log("The response is coming in!!");
        }
        if (xhr.readyState == 4) {
          console.log("The call to open(...) succeeded.We now have the complete response: " + xhr.response);
        }
      }
      
      var url = window.location.pathname;

      xhr.open("GET", "http://fast-forest-5811.herokuapp.com/sites/"+url+"/"+difference/1000, true);
      xhr.send("");
      }
    </script>      
  </body>
</html>
